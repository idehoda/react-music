[{"/Users/idehoda/Desktop/react-playground/react-music/src/App.js":"1","/Users/idehoda/Desktop/react-playground/react-music/src/components/AddSong.js":"2","/Users/idehoda/Desktop/react-playground/react-music/src/components/SongPlayer.js":"3","/Users/idehoda/Desktop/react-playground/react-music/src/components/Header.js":"4","/Users/idehoda/Desktop/react-playground/react-music/src/components/SongList.js":"5","/Users/idehoda/Desktop/react-playground/react-music/src/index.js":"6","/Users/idehoda/Desktop/react-playground/react-music/src/components/QueuedSongList.js":"7","/Users/idehoda/Desktop/react-playground/react-music/src/theme.js":"8","/Users/idehoda/Desktop/react-playground/react-music/src/graphql/client.js":"9","/Users/idehoda/Desktop/react-playground/react-music/src/graphql/queries.js":"10","/Users/idehoda/Desktop/react-playground/react-music/src/graphql/subscriptions.js":"11","/Users/idehoda/Desktop/react-playground/react-music/src/reducer.js":"12","/Users/idehoda/Desktop/react-playground/react-music/src/graphql/mutations.js":"13"},{"size":1977,"mtime":1606773381725,"results":"14","hashOfConfig":"15"},{"size":6277,"mtime":1606689702455,"results":"16","hashOfConfig":"15"},{"size":3048,"mtime":1606775359433,"results":"17","hashOfConfig":"15"},{"size":650,"mtime":1606249212612,"results":"18","hashOfConfig":"15"},{"size":3523,"mtime":1606777702650,"results":"19","hashOfConfig":"15"},{"size":511,"mtime":1606683203967,"results":"20","hashOfConfig":"15"},{"size":2387,"mtime":1606777717935,"results":"21","hashOfConfig":"15"},{"size":250,"mtime":1606249212613,"results":"22","hashOfConfig":"15"},{"size":1929,"mtime":1606777860916,"results":"23","hashOfConfig":"15"},{"size":235,"mtime":1606682080986,"results":"24","hashOfConfig":"15"},{"size":220,"mtime":1606690279125,"results":"25","hashOfConfig":"15"},{"size":403,"mtime":1606774521352,"results":"26","hashOfConfig":"15"},{"size":475,"mtime":1606776657792,"results":"27","hashOfConfig":"15"},{"filePath":"28","messages":"29","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"igwb9p",{"filePath":"30","messages":"31","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"32","usedDeprecatedRules":"33"},{"filePath":"34","messages":"35","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"36","messages":"37","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"38"},{"filePath":"39","messages":"40","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"41","messages":"42","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"38"},{"filePath":"43","messages":"44","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"45","messages":"46","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"47","messages":"48","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"49","messages":"50","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"51","messages":"52","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"53","messages":"54","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"55","messages":"56","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"/Users/idehoda/Desktop/react-playground/react-music/src/App.js",[],"/Users/idehoda/Desktop/react-playground/react-music/src/components/AddSong.js",["57"],"import React from 'react';\nimport { \n    TextField, InputAdornment, Button, Dialog, DialogTitle, DialogContent, DialogActions, makeStyles\n} from '@material-ui/core';\nimport { Link, AddBoxOutlined } from '@material-ui/icons';\nimport ReactPlayer from 'react-player';\nimport SoundcloudPlayer from 'react-player/lib/players/SoundCloud'\nimport YouTubePlayer from 'react-player/lib/players/YouTube'\nimport { ADD_SONG } from '../graphql/mutations';\nimport { useQuery, useMutation } from '@apollo/react-hooks';\n\nconst useStyles = makeStyles(theme => ({\n    container: {\n        display: 'flex',\n        alignItems: 'center',\n    },\n    urlInput: {\n        margin: theme.spacing(1)\n    },\n    addSongButton: {\n        margin: theme.spacing(1)\n    },\n    dialog: {\n        textAlign: 'center'\n    },\n    thumbnail: {\n        width: '90%'\n    }\n}))\n\nconst defaultSongState = {\n    duration: 0,\n    title: '',\n    artist: '',\n    thumbnail: ''\n}\n\nfunction AddSong() {\n    const classes = useStyles();\n    const [ addSong, { error } ] = useMutation(ADD_SONG);\n    const [ dialog, setDialog ] =  React.useState(false);\n    const [ playable, setPlayable ] =  React.useState(false);\n    const [ url, setUrl ] = React.useState('');\n    const [ song, setSong ] = React.useState(defaultSongState);\n\n    React.useEffect(() => {\n        const isPlayable = SoundcloudPlayer.canPlay(url) || YouTubePlayer.canPlay(url);\n        setPlayable(isPlayable);\n    }, [url])\n    \n    function handleCloseDialog() {\n        setDialog(false)\n    }\n    function handleChangeSong(e) {\n        const { name, value } = e.target;\n        setSong(prevSong => ({\n            ...prevSong,\n            [name]: value\n        }))\n    }\n    async function handleAddSong() {\n        const { url, thumbnail, duration, title, artist } = song;\n        try {\n            await addSong({ \n                variables: {\n                    url: url.length > 0 ? url : null,\n                    thumbnail: thumbnail.length > 0 ? thumbnail : null,\n                    title: title.length > 0 ? title : null,\n                    artist: artist.length > 0 ? artist : null,\n                    duration: duration > 0 ? duration : null\n                }\n            })\n            handleCloseDialog();\n            setSong(defaultSongState);\n            setUrl('');\n        } catch (error) {\n            console.error('error adding song :(')  \n        }\n    }\n    async function handleEditSong({ player }) {\n        const nestedPlayer = player.player.player;\n        let songData;\n        if (nestedPlayer.getVideoData) {\n            songData = getYoutubeInfo(nestedPlayer);\n        } else if (nestedPlayer.getCurrentSound){\n            songData = await getSoundCloudInfo(nestedPlayer);\n        }\n        setSong({...songData, url});\n    }\n    function handleError(field) {\n        return error?.graphQLErrors[0]?.extensions?.path.includes(field);\n    }\n    function getYoutubeInfo(player) {\n        const duration = player.getDuration();\n        const { title, video_id, author } = player.getVideoData();\n        const thumbnail = `https://img.youtube.com/vi/${video_id}/0.jpg`;\n        return {\n            duration,\n            title,\n            artist: author,\n            thumbnail\n        }\n    }\n    function getSoundCloudInfo(player) {\n        return new Promise(resolve => {\n            player.getCurrentSound( songData => {\n                if (songData) {\n                    resolve({\n                        duration: Number(songData.duration / 1000),\n                        title: songData.title,\n                        artist: songData.user.username,\n                        thumbnail: songData.artwork_url.replace('-large', '-t500x500')\n                    })\n                }\n            })\n        })\n    }\n    const { thumbnail, artist, title } = song;\n\n    return (\n        <div className={classes.container}>\n            <Dialog \n                className={classes.dialog}\n                open={dialog}\n                onClose={handleCloseDialog}\n            >\n                <DialogTitle> Edit song </DialogTitle>\n                <DialogContent> \n                    <img \n                        className={classes.thumbnail} \n                        src={thumbnail}\n                        alt=\"song thumbnail\"\n                    />\n                    <TextField error={handleError('title')} helperText={handleError('title') && 'Fill out tltle'} onChange={handleChangeSong} value={title} margin='dense' name='title' label='Title' fullWidth />\n                    <TextField error={handleError('artist')} helperText={handleError('artist') && 'Fill out artist'} onChange={handleChangeSong} value={artist} margin='dense' name='artist' label='Artist' fullWidth />\n                    <TextField error={handleError('thumbnail')} helperText={handleError('thumbnail') && 'Fill out thumbnail'} onChange={handleChangeSong} value={thumbnail} margin='dense' name='thumbnail' label='Thumbnail' fullWidth />\n                </DialogContent>\n                <DialogActions>\n                    <Button onClick={handleCloseDialog} color='secondary'>Cancel</Button>\n                    <Button onClick={handleAddSong} variant='outlined' color='primary'>Add song</Button>\n                </DialogActions>\n            </Dialog>\n            <TextField\n                onChange={e => setUrl(e.target.value)}\n                value={url}\n                className={classes.urlInput}\n                placeholder=\"Add youtube or soundCLoud url\"\n                fullWidth\n                margin=\"normal\"\n                type=\"url\"\n                InputProps={{\n                    startAdornment: (\n                        <InputAdornment position='start'>\n                            <Link />\n                        </InputAdornment> \n                    )\n                }}\n            />\n            <Button\n                disabled={!playable}\n                className={classes.addSongButton}\n                onClick={() => setDialog(true)}\n                variant='contained'\n                color='primary'\n                endIcon={<AddBoxOutlined />}\n            >\n                Add\n            </Button>\n            <ReactPlayer url={url} hidden onReady={handleEditSong}/>\n        </div>\n    )\n}\n\nexport default AddSong;",["58","59"],"/Users/idehoda/Desktop/react-playground/react-music/src/components/SongPlayer.js",["60"],"/Users/idehoda/Desktop/react-playground/react-music/src/components/Header.js",[],["61","62"],"/Users/idehoda/Desktop/react-playground/react-music/src/components/SongList.js",[],"/Users/idehoda/Desktop/react-playground/react-music/src/index.js",[],"/Users/idehoda/Desktop/react-playground/react-music/src/components/QueuedSongList.js",["63"],"/Users/idehoda/Desktop/react-playground/react-music/src/theme.js",[],"/Users/idehoda/Desktop/react-playground/react-music/src/graphql/client.js",[],"/Users/idehoda/Desktop/react-playground/react-music/src/graphql/queries.js",[],"/Users/idehoda/Desktop/react-playground/react-music/src/graphql/subscriptions.js",[],"/Users/idehoda/Desktop/react-playground/react-music/src/reducer.js",[],"/Users/idehoda/Desktop/react-playground/react-music/src/graphql/mutations.js",[],{"ruleId":"64","severity":1,"message":"65","line":10,"column":10,"nodeType":"66","messageId":"67","endLine":10,"endColumn":18},{"ruleId":"68","replacedBy":"69"},{"ruleId":"70","replacedBy":"71"},{"ruleId":"64","severity":1,"message":"72","line":5,"column":45,"nodeType":"66","messageId":"67","endLine":5,"endColumn":49},{"ruleId":"68","replacedBy":"73"},{"ruleId":"70","replacedBy":"74"},{"ruleId":"64","severity":1,"message":"75","line":4,"column":23,"nodeType":"66","messageId":"67","endLine":4,"endColumn":38},"no-unused-vars","'useQuery' is defined but never used.","Identifier","unusedVar","no-native-reassign",["76"],"no-negated-in-lhs",["77"],"'Stop' is defined but never used.",["76"],["77"],"'useSubscription' is defined but never used.","no-global-assign","no-unsafe-negation"]